// commands/basic.ts
import { Command } from "@/types/dashboard";

const templates = {
  "node-js": {
    key: "templates/node-js",
    name: "Node-JS",
  },
  python: {
    key: "templates/python",
    name: "Python",
  },
};

const ASCII_BANNER = `

  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•—   â–ˆâ–ˆâ•—â–ˆâ–ˆâ•—  â–ˆâ–ˆâ•—            â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•—      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•—   â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—     â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—
  â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•    â–ˆâ–ˆâ•—    â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—    â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â•â•â•
  â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘ â•šâ–ˆâ–ˆâ–ˆâ•”â•     â•šâ•â•    â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘    â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—
  â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•  â•šâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•”â• â–ˆâ–ˆâ•”â–ˆâ–ˆâ•—     â–ˆâ–ˆâ•—    â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘    â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•
  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â•šâ–ˆâ–ˆâ–ˆâ–ˆâ•”â• â–ˆâ–ˆâ•”â• â–ˆâ–ˆâ•—    â•šâ•â•    â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•    â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—
  â•šâ•â•â•â•â•â• â•šâ•â•â•â•â•â•â•  â•šâ•â•â•â•  â•šâ•â•  â•šâ•â•            â•šâ•â•â•â•â•â•â•šâ•â•â•â•â•â•â• â•šâ•â•â•â•â•â•  â•šâ•â•â•â•â•â• â•šâ•â•â•â•â•â•     â•šâ•â•â•šâ•â•â•â•â•â• â•šâ•â•â•â•â•â•â•

`;

export const helpCommand: Command = {
  name: "help",
  description: "Show available commands and getting started guide",
  usage: "help [command]",
  arguments: [
    {
      name: "command",
      description: "Specific command to get help for",
      required: false,
      type: "string",
    },
  ],
  execute: async (args, options, context) => {
    if (args.length > 0) {
      // Help for specific command would be handled by the command parser
      return `Use '${args[0]} --help' for detailed help on that command.`;
    }

    const commands = [
      "help",
      "version",
      "status",
      "templates",
      "repl",
      "clear",
      "whoami",
      "ls",
      "neofetch",
    ];

    const commandList = commands
      .map((cmd) => `  ${cmd.padEnd(12)} - Available command`)
      .join("\n");

    return `â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚             AVAILABLE COMMANDS          â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
${commandList}

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚             GETTING STARTED             â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
ğŸš€ Quick Start Guide:
1. Create a new repl: repl create <name> <template>
2. Activate your repl: repl activate <name>
3. List all repls: repl list

ğŸ’¡ Example workflow:
   repl create my-app node-js
   repl activate my-app

Type <command> --help for detailed usage information.`;
  },
};

export const versionCommand: Command = {
  name: "version",
  description: "Show application version and system information",
  usage: "version",
  execute: async (args, options, context) => {
    return `â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚             SYSTEM INFO                 â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
devX v2.0.0 - Next-Gen Terminal Interface
Built with React & TypeScript
Status: Online âœ“`;
  },
};

export const statusCommand: Command = {
  name: "status",
  description: "Display comprehensive system status and metrics",
  usage: "status",
  execute: async (args, options, context) => {
    const uptime = Math.floor(Math.random() * 72) + 1;
    const repls = await context.getRepls();
    return `â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚             SYSTEM STATUS               â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
ğŸŸ¢ System:     Online
ğŸ”‹ CPU:        ${Math.floor(Math.random() * 30) + 10}%
ğŸ’¾ Memory:     ${Math.floor(Math.random() * 40) + 20}%
ğŸ’¿ Storage:    ${Math.floor(Math.random() * 60) + 15}%
â±ï¸ Uptime:     ${uptime}h ${Math.floor(Math.random() * 60)}m
ğŸ“Š Repls:      ${repls.length} active

ğŸ’¡ Use 'repl list' to see all your repls`;
  },
};

export const templatesCommand: Command = {
  name: "templates",
  description: "Show available templates for creating new repls",
  usage: "templates",
  execute: async (args, options, context) => {
    const templateList = Object.entries(templates)
      .map(([key, template]) => `  ${key.padEnd(12)} - ${template.name}`)
      .join("\n");
    return `â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚           AVAILABLE TEMPLATES           â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
${templateList}

ğŸ’¡ Usage: repl create <name> <template>
   Example: repl create my-app node-js`;
  },
};

export const clearCommand: Command = {
  name: "clear",
  description: "Clear the terminal screen and reset history",
  usage: "clear",
  execute: async (args, options, context) => {
    context.setHistory([
      {
        type: "info",
        content: "ğŸš€ devX Terminal v2.0.0 - Ready for commands",
        timestamp: new Date().toLocaleTimeString(),
      },
    ]);
    return "";
  },
};

export const whoamiCommand: Command = {
  name: "whoami",
  description: "Display current user information and session details",
  usage: "whoami",
  execute: async (args, options, context) => {
    return `â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚              USER PROFILE               â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
ğŸ‘¤ User:       ${context.userName}
ğŸ  Home:       /home/${context.userName}
ğŸš Shell:      devX Terminal v2.0.0
ğŸŒ Session:    ${new Date().toLocaleString()}

ğŸ’¡ Try 'repl create <name> <template>' to get started!`;
  },
};

export const lsCommand: Command = {
  name: "ls",
  description: "List all repls (alias for 'repl list')",
  usage: "ls [--detailed]",
  options: [
    {
      flag: "--detailed",
      description: "Show detailed information about each repl",
      type: "boolean",
    },
  ],
  execute: async (args, options, context) => {
    try {
      const repls = await context.getRepls();

      if (repls.length === 0) {
        return `ğŸ“­ No repls found.

ğŸš€ Get started by creating your first repl:
   repl create my-app node-js
   repl activate my-app

ğŸ’¡ Use 'templates' to see available templates.`;
      }

      const detailed = options.detailed || options.d;
      if (detailed) {
        const header = `â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚               REPL DETAILS              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯`;
        const replList = repls
          .map(
            (repl) =>
              `ğŸ“ ${repl.name} (ID: ${repl.id})
   ğŸ‘¤ User: ${repl.user}
   âš¡ Status: Active
   ğŸš€ Activate: repl activate ${repl.name}`,
          )
          .join("\n\n");
        return `${header}\n${replList}\n\nğŸ’¡ Use 'repl activate <name>' to activate any repl.`;
      }

      const header = `â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚               ACTIVE REPLS              â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯`;
      return `${header}\n${repls.map((repl, i) => `${i + 1}. ğŸ“ ${repl.name} (${repl.id})`).join("\n")}\n\nğŸ’¡ Use 'repl activate <name>' to activate a repl or 'repl list --detailed' for more info.`;
    } catch (error: any) {
      return `âŒ Error fetching repls: ${error.message || "Unknown error"}`;
    }
  },
};

export const neofetchCommand: Command = {
  name: "neofetch",
  description: "Display system information in a stylized format",
  usage: "neofetch",
  execute: async (args, options, context) => {
    return `                    â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
    â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®   â”‚     devX v2.0.0       â”‚
    â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ   â”‚   â”‚                           â”‚
    â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ   â”‚   â”‚ OS: devX Terminal     â”‚
    â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ   â”‚   â”‚ Shell: Advanced CLI       â”‚
    â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ   â”‚   â”‚ Theme: Dark Terminal      â”‚
    â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯   â”‚ Uptime: Online            â”‚
                    â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

ğŸ’¡ Ready to code! Try 'repl create <name> <template>'`;
  },
};
